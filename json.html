<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JSON Formatter - ionflow.xyz</title>
    <meta name="description" content="온라인 JSON 포맷터. JSON을 보기 좋게 정리하고 문법을 검증합니다.">

    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3465506500903274"
        crossorigin="anonymous"></script>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css">
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="common.css">

    <style>
        .tool-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
            margin-bottom: 24px;
        }

        textarea { height: 400px; }
        .output-area { height: 400px; }

        .action-buttons {
            display: flex;
            justify-content: center;
            gap: 12px;
            margin-bottom: 32px;
        }

        .json-key { color: #881391; }
        .json-string { color: #1a1aa6; }
        .json-number { color: #1c00cf; }
        .json-boolean { color: #0d22aa; }
        .json-null { color: #808080; }

        @media (max-width: 900px) {
            .tool-container { grid-template-columns: 1fr; }
            textarea, .output-area { height: 300px; }
        }
    </style>
</head>
<body>
    <header>
        <div class="nav-container">
            <a href="/" class="logo">ionflow</a>
            <nav>
                <a href="/qr.html">QR 생성기</a>
                <a href="/json.html">JSON</a>
                <a href="/base64.html">Base64</a>
                <a href="/password.html">비밀번호</a>
            </nav>
        </div>
    </header>

    <div class="page-header">
        <h1>JSON Formatter</h1>
        <p>JSON을 보기 좋게 정리하고 문법을 검증합니다.</p>
    </div>

    <main>
        <div id="status" class="status"></div>

        <div class="tool-container">
            <div class="panel">
                <div class="panel-header">
                    <span class="panel-title">입력</span>
                    <div class="panel-actions">
                        <button onclick="loadSample()">샘플</button>
                        <button onclick="clearInput()">지우기</button>
                    </div>
                </div>
                <textarea id="json-input" class="code-font" placeholder='{"name": "홍길동", "age": 30}' spellcheck="false"></textarea>
            </div>

            <div class="panel">
                <div class="panel-header">
                    <span class="panel-title">결과</span>
                    <div class="panel-actions">
                        <button onclick="copyOutput()">복사</button>
                        <select id="indent-size" onchange="formatJSON()">
                            <option value="2">2 spaces</option>
                            <option value="4">4 spaces</option>
                        </select>
                    </div>
                </div>
                <div id="json-output" class="output-area code-font"></div>
            </div>
        </div>

        <div class="action-buttons">
            <button class="action-btn primary" onclick="formatJSON()">포맷팅</button>
            <button class="action-btn success" onclick="minifyJSON()">압축</button>
            <button class="action-btn purple" onclick="validateJSON()">검증</button>
        </div>

        <div class="ad-space">광고</div>
    </main>

    <footer>
        <p>Copyright © 2026 ionflow.xyz</p>
    </footer>

    <script>
        const input = document.getElementById('json-input');
        const output = document.getElementById('json-output');
        const status = document.getElementById('status');

        function showStatus(message, isError = false) {
            status.textContent = message;
            status.className = 'status ' + (isError ? 'error' : 'success');
            setTimeout(() => { status.className = 'status'; }, 3000);
        }

        function syntaxHighlight(json) {
            json = json.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');
            return json.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g, function (match) {
                let cls = 'json-number';
                if (/^"/.test(match)) {
                    cls = /:$/.test(match) ? 'json-key' : 'json-string';
                } else if (/true|false/.test(match)) {
                    cls = 'json-boolean';
                } else if (/null/.test(match)) {
                    cls = 'json-null';
                }
                return '<span class="' + cls + '">' + match + '</span>';
            });
        }

        function formatJSON() {
            try {
                const indent = parseInt(document.getElementById('indent-size').value);
                const obj = JSON.parse(input.value);
                const formatted = JSON.stringify(obj, null, indent);
                output.innerHTML = '<pre>' + syntaxHighlight(formatted) + '</pre>';
                showStatus('포맷팅 완료');
            } catch (e) {
                output.innerHTML = '<span style="color:#c53030">오류: ' + e.message + '</span>';
                showStatus(e.message, true);
            }
        }

        function minifyJSON() {
            try {
                const obj = JSON.parse(input.value);
                const minified = JSON.stringify(obj);
                output.innerHTML = '<pre>' + syntaxHighlight(minified) + '</pre>';
                showStatus('압축 완료 (' + minified.length + '자)');
            } catch (e) {
                showStatus(e.message, true);
            }
        }

        function validateJSON() {
            try {
                JSON.parse(input.value);
                output.innerHTML = '<div style="text-align:center;padding:40px;color:#1d7324;"><div style="font-size:48px;margin-bottom:16px;">✓</div>유효한 JSON입니다</div>';
                showStatus('유효한 JSON입니다');
            } catch (e) {
                output.innerHTML = '<div style="text-align:center;padding:40px;color:#c53030;"><div style="font-size:48px;margin-bottom:16px;">✗</div>' + e.message + '</div>';
                showStatus(e.message, true);
            }
        }

        function copyOutput() {
            const text = output.textContent || output.innerText;
            navigator.clipboard.writeText(text).then(() => showStatus('복사되었습니다'));
        }

        function clearInput() {
            input.value = '';
            output.innerHTML = '';
        }

        function loadSample() {
            input.value = JSON.stringify({
                "name": "홍길동",
                "age": 30,
                "email": "hong@example.com",
                "skills": ["JavaScript", "Python"],
                "address": { "city": "서울", "zip": "06000" }
            }, null, 2);
            formatJSON();
        }

        input.addEventListener('paste', () => setTimeout(formatJSON, 100));
    </script>
    <script src="layout.js"></script>
</body>
</html>
