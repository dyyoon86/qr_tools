<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-i18n="byteCounterTitle">글자수/바이트 계산기 - ionflow.xyz</title>
    <meta name="description" content="텍스트의 글자수와 바이트 수를 계산합니다. UTF-8, EUC-KR 등 다양한 인코딩 지원.">

    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3465506500903274"
        crossorigin="anonymous"></script>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css">
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/assets/css/common.css">

    <style>
        main { max-width: 800px; }
        textarea {
            height: 200px;
            font-size: 15px;
            line-height: 1.6;
        }

        .options {
            display: flex;
            gap: 16px;
            align-items: center;
            margin-bottom: 16px;
            flex-wrap: wrap;
        }
        .options label {
            font-size: 14px;
            color: #86868b;
        }
        .options select {
            padding: 8px 12px;
            font-size: 14px;
            border: 1px solid #d2d2d7;
            border-radius: 8px;
            background: #fff;
            cursor: pointer;
            min-width: 150px;
        }
        .options select:focus {
            outline: none;
            border-color: #0071e3;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 16px;
            margin-top: 20px;
        }
        .stat-card {
            background: #fff;
            border-radius: 12px;
            padding: 20px;
            text-align: center;
        }
        .stat-value {
            font-size: 32px;
            font-weight: 700;
            color: #1d1d1f;
            font-family: 'JetBrains Mono', monospace;
        }
        .stat-label {
            font-size: 13px;
            color: #86868b;
            margin-top: 4px;
        }
        .stat-card.highlight {
            background: linear-gradient(135deg, #0071e3, #00c7be);
        }
        .stat-card.highlight .stat-value,
        .stat-card.highlight .stat-label {
            color: #fff;
        }

        .detail-section {
            margin-top: 24px;
            background: #fff;
            border-radius: 12px;
            padding: 20px;
        }
        .detail-title {
            font-size: 15px;
            font-weight: 600;
            margin-bottom: 16px;
        }
        .detail-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 12px;
        }
        .detail-item {
            display: flex;
            justify-content: space-between;
            padding: 10px 12px;
            background: #f5f5f7;
            border-radius: 8px;
            font-size: 14px;
        }
        .detail-item .label { color: #86868b; }
        .detail-item .value {
            font-weight: 600;
            font-family: 'JetBrains Mono', monospace;
        }

        .info-section { margin-top: 24px; }
        .info-section h2 { font-size: 21px; font-weight: 600; margin-bottom: 16px; }
        .info-section p { font-size: 15px; color: #86868b; margin-bottom: 16px; line-height: 1.6; }
        .info-table { width: 100%; border-collapse: collapse; }
        .info-table th, .info-table td { padding: 12px 16px; text-align: left; font-size: 14px; }
        .info-table th { background: #e8e8ed; font-weight: 600; }
        .info-table th:first-child { border-radius: 8px 0 0 8px; }
        .info-table th:last-child { border-radius: 0 8px 8px 0; }
        .info-table td { color: #86868b; border-bottom: 1px solid #e8e8ed; }
        .info-table tr:last-child td { border-bottom: none; }

        .clear-btn {
            padding: 8px 16px;
            background: #e8e8ed;
            border: none;
            border-radius: 8px;
            font-size: 13px;
            cursor: pointer;
            margin-left: auto;
        }
        .clear-btn:hover { background: #d2d2d7; }
    </style>
</head>
<body>
    <div class="page-header">
        <h1 data-i18n="byteCounterHeading">Byte Counter</h1>
        <p data-i18n="byteCounterSubheading">글자수와 바이트 수를 실시간으로 계산합니다</p>
    </div>

    <main>
        <div class="panel">
            <div class="options">
                <label data-i18n="charsetLabel">인코딩:</label>
                <select id="charset" onchange="calculate()">
                    <option value="utf-8" selected>UTF-8</option>
                    <option value="euc-kr">EUC-KR (한국어)</option>
                    <option value="utf-16">UTF-16</option>
                    <option value="utf-32">UTF-32</option>
                    <option value="iso-8859-1">ISO-8859-1 (Latin-1)</option>
                    <option value="ascii">ASCII</option>
                    <option value="shift-jis">Shift-JIS (일본어)</option>
                    <option value="gb2312">GB2312 (중국어 간체)</option>
                    <option value="big5">Big5 (중국어 번체)</option>
                </select>
                <button class="clear-btn" onclick="clearText()" data-i18n="clearBtn">지우기</button>
            </div>

            <textarea id="text-input" placeholder="텍스트를 입력하세요..." data-i18n-placeholder="byteInputPlaceholder" oninput="calculate()"></textarea>

            <div class="stats-grid">
                <div class="stat-card highlight">
                    <div class="stat-value" id="byte-count">0</div>
                    <div class="stat-label" data-i18n="byteLabel">바이트 (Bytes)</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="char-count">0</div>
                    <div class="stat-label" data-i18n="charLabel">글자수</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="char-no-space">0</div>
                    <div class="stat-label" data-i18n="charNoSpaceLabel">글자수 (공백제외)</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="word-count">0</div>
                    <div class="stat-label" data-i18n="wordLabel">단어수</div>
                </div>
            </div>

            <div class="detail-section">
                <div class="detail-title" data-i18n="detailTitle">상세 정보</div>
                <div class="detail-grid">
                    <div class="detail-item">
                        <span class="label" data-i18n="lineCount">줄 수</span>
                        <span class="value" id="line-count">0</span>
                    </div>
                    <div class="detail-item">
                        <span class="label" data-i18n="paragraphCount">문단 수</span>
                        <span class="value" id="paragraph-count">0</span>
                    </div>
                    <div class="detail-item">
                        <span class="label" data-i18n="koreanCount">한글</span>
                        <span class="value" id="korean-count">0</span>
                    </div>
                    <div class="detail-item">
                        <span class="label" data-i18n="englishCount">영문</span>
                        <span class="value" id="english-count">0</span>
                    </div>
                    <div class="detail-item">
                        <span class="label" data-i18n="numberCount">숫자</span>
                        <span class="value" id="number-count">0</span>
                    </div>
                    <div class="detail-item">
                        <span class="label" data-i18n="spaceCount">공백</span>
                        <span class="value" id="space-count">0</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="ad-space">광고</div>

        <div class="info-section">
            <h2 data-i18n="encodingInfoTitle">인코딩별 바이트 크기</h2>
            <p data-i18n="encodingInfoDesc">같은 문자라도 인코딩 방식에 따라 바이트 크기가 다릅니다. 한글의 경우 UTF-8에서는 3바이트, EUC-KR에서는 2바이트를 사용합니다.</p>
            <table class="info-table">
                <thead>
                    <tr>
                        <th data-i18n="encodingCol">인코딩</th>
                        <th data-i18n="asciiCol">ASCII/영문</th>
                        <th data-i18n="koreanCol">한글</th>
                        <th data-i18n="noteCol">특징</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>UTF-8</td>
                        <td>1 byte</td>
                        <td>3 bytes</td>
                        <td data-i18n="utf8Note">웹 표준, 가장 널리 사용</td>
                    </tr>
                    <tr>
                        <td>EUC-KR</td>
                        <td>1 byte</td>
                        <td>2 bytes</td>
                        <td data-i18n="euckrNote">한국어 레거시 시스템</td>
                    </tr>
                    <tr>
                        <td>UTF-16</td>
                        <td>2 bytes</td>
                        <td>2 bytes</td>
                        <td data-i18n="utf16Note">Windows 내부, Java String</td>
                    </tr>
                    <tr>
                        <td>UTF-32</td>
                        <td>4 bytes</td>
                        <td>4 bytes</td>
                        <td data-i18n="utf32Note">고정 길이, 처리 용이</td>
                    </tr>
                    <tr>
                        <td>ASCII</td>
                        <td>1 byte</td>
                        <td>-</td>
                        <td data-i18n="asciiNote">영문/숫자만 지원</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </main>

    <script>
        // Calculate byte size based on encoding
        function getByteSize(text, encoding) {
            if (!text) return 0;

            switch (encoding) {
                case 'utf-8':
                    return new Blob([text]).size;

                case 'utf-16':
                    // UTF-16: 2 bytes for BMP, 4 bytes for supplementary
                    let utf16Bytes = 0;
                    for (const char of text) {
                        const code = char.codePointAt(0);
                        utf16Bytes += code > 0xFFFF ? 4 : 2;
                    }
                    return utf16Bytes;

                case 'utf-32':
                    // UTF-32: 4 bytes per character
                    return [...text].length * 4;

                case 'euc-kr':
                    // EUC-KR: 1 byte for ASCII, 2 bytes for Korean
                    let euckrBytes = 0;
                    for (const char of text) {
                        const code = char.charCodeAt(0);
                        if (code <= 0x7F) {
                            euckrBytes += 1; // ASCII
                        } else if ((code >= 0xAC00 && code <= 0xD7AF) || // Hangul Syllables
                                   (code >= 0x3130 && code <= 0x318F) || // Hangul Compatibility Jamo
                                   (code >= 0x1100 && code <= 0x11FF)) { // Hangul Jamo
                            euckrBytes += 2; // Korean
                        } else {
                            euckrBytes += 2; // Other double-byte
                        }
                    }
                    return euckrBytes;

                case 'shift-jis':
                    // Shift-JIS: 1 byte for ASCII, 2 bytes for Japanese
                    let sjisBytes = 0;
                    for (const char of text) {
                        const code = char.charCodeAt(0);
                        if (code <= 0x7F) {
                            sjisBytes += 1;
                        } else {
                            sjisBytes += 2;
                        }
                    }
                    return sjisBytes;

                case 'gb2312':
                case 'big5':
                    // GB2312/Big5: 1 byte for ASCII, 2 bytes for CJK
                    let cjkBytes = 0;
                    for (const char of text) {
                        const code = char.charCodeAt(0);
                        if (code <= 0x7F) {
                            cjkBytes += 1;
                        } else {
                            cjkBytes += 2;
                        }
                    }
                    return cjkBytes;

                case 'iso-8859-1':
                    // ISO-8859-1: 1 byte per character (Latin-1)
                    return text.length;

                case 'ascii':
                    // ASCII: 1 byte per character (only 0-127)
                    let asciiBytes = 0;
                    for (const char of text) {
                        const code = char.charCodeAt(0);
                        if (code <= 0x7F) {
                            asciiBytes += 1;
                        }
                        // Non-ASCII characters are not representable
                    }
                    return asciiBytes;

                default:
                    return new Blob([text]).size;
            }
        }

        function calculate() {
            const text = document.getElementById('text-input').value;
            const encoding = document.getElementById('charset').value;

            // Byte count
            const byteCount = getByteSize(text, encoding);
            document.getElementById('byte-count').textContent = byteCount.toLocaleString();

            // Character count (grapheme clusters for accurate emoji counting)
            const charCount = [...text].length;
            document.getElementById('char-count').textContent = charCount.toLocaleString();

            // Character count without spaces
            const charNoSpace = [...text.replace(/\s/g, '')].length;
            document.getElementById('char-no-space').textContent = charNoSpace.toLocaleString();

            // Word count
            const words = text.trim().split(/\s+/).filter(w => w.length > 0);
            document.getElementById('word-count').textContent = words.length.toLocaleString();

            // Line count
            const lines = text.split('\n');
            document.getElementById('line-count').textContent = text ? lines.length.toLocaleString() : '0';

            // Paragraph count (non-empty lines separated by empty lines)
            const paragraphs = text.split(/\n\s*\n/).filter(p => p.trim().length > 0);
            document.getElementById('paragraph-count').textContent = paragraphs.length.toLocaleString();

            // Korean character count
            const koreanCount = (text.match(/[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F]/g) || []).length;
            document.getElementById('korean-count').textContent = koreanCount.toLocaleString();

            // English character count
            const englishCount = (text.match(/[a-zA-Z]/g) || []).length;
            document.getElementById('english-count').textContent = englishCount.toLocaleString();

            // Number count
            const numberCount = (text.match(/[0-9]/g) || []).length;
            document.getElementById('number-count').textContent = numberCount.toLocaleString();

            // Space count
            const spaceCount = (text.match(/\s/g) || []).length;
            document.getElementById('space-count').textContent = spaceCount.toLocaleString();
        }

        function clearText() {
            document.getElementById('text-input').value = '';
            calculate();
        }

        // Initialize
        calculate();
    </script>
    <script src="/assets/js/i18n.js?v=4"></script>
    <script src="/assets/js/layout.js?v=3"></script>
</body>
</html>
