<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>색상 변환기 - ionflow.xyz</title>
    <meta name="description" content="HEX, RGB, HSL 색상 코드를 서로 변환하세요.">

    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3465506500903274"
        crossorigin="anonymous"></script>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css">
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/assets/css/common.css">

    <style>
        main { max-width: 800px; }

        .color-preview-row {
            display: flex;
            gap: 24px;
            align-items: flex-start;
            margin-bottom: 24px;
        }
        .color-preview {
            width: 120px;
            height: 120px;
            border-radius: 16px;
            box-shadow: inset 0 0 0 4px #fff;
        }
        .color-picker-wrapper { flex: 1; }
        .color-picker-wrapper label { display: block; font-size: 14px; color: #86868b; margin-bottom: 8px; }
        .color-picker-wrapper input[type="color"] {
            width: 100%;
            height: 48px;
            border: 1px solid #d2d2d7;
            border-radius: 10px;
            cursor: pointer;
        }

        .color-input-group { margin-bottom: 16px; }
        .color-input-group label { display: block; font-size: 14px; color: #86868b; margin-bottom: 8px; }
        .color-input-row { display: flex; gap: 8px; align-items: center; }
        .color-input-row input[type="text"],
        .color-input-row input[type="number"] {
            padding: 12px 14px;
            border: 1px solid #d2d2d7;
            border-radius: 10px;
            font-size: 14px;
            background: #fff;
        }
        .color-input-row input[type="text"] { flex: 1; }
        .color-input-row input[type="number"] { width: 70px; text-align: center; }
        .color-input-row input:focus { outline: none; border-color: #86868b; }
        .color-input-row span { font-size: 13px; color: #86868b; }

        .copy-btn {
            padding: 12px 16px;
            background: #e8e8ed;
            border: none;
            border-radius: 10px;
            font-size: 14px;
            cursor: pointer;
        }
        .copy-btn:hover { background: #d2d2d7; }

        .css-output { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-top: 16px; }
        .css-output input {
            padding: 12px;
            background: #fff;
            border: 1px solid #d2d2d7;
            border-radius: 10px;
            font-size: 12px;
        }

        .palette-grid { display: grid; grid-template-columns: repeat(10, 1fr); gap: 8px; }
        .palette-item {
            height: 40px;
            border-radius: 8px;
            cursor: pointer;
            transition: transform 0.2s;
        }
        .palette-item:hover { transform: scale(1.1); }

        .info-section { margin-top: 24px; }
        .info-section h2 { font-size: 21px; font-weight: 600; margin-bottom: 16px; }
        .info-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 24px; }
        .info-grid h3 { font-size: 15px; font-weight: 600; margin-bottom: 8px; }
        .info-grid p { font-size: 13px; color: #86868b; line-height: 1.5; }

        @media (max-width: 768px) {
            .info-grid { grid-template-columns: 1fr; }
            .color-preview-row { flex-direction: column; }
            .color-preview { width: 100%; height: 80px; }
            .palette-grid { grid-template-columns: repeat(5, 1fr); }
        }
    </style>
</head>
<body>
    <div class="page-header">
        <h1>Color Converter</h1>
        <p>HEX, RGB, HSL 색상 코드를 변환하세요</p>
    </div>

    <main>
        <div id="status" class="status"></div>

        <div class="panel">
            <div class="color-preview-row">
                <div id="color-preview" class="color-preview" style="background: #3B82F6;"></div>
                <div class="color-picker-wrapper">
                    <label>색상 선택</label>
                    <input type="color" id="color-picker" value="#3B82F6" onchange="fromPicker()">
                </div>
            </div>

            <div class="color-input-group">
                <label>HEX</label>
                <div class="color-input-row">
                    <input type="text" id="hex-input" class="code-font" value="#3B82F6" placeholder="#RRGGBB" oninput="fromHex()">
                    <button class="copy-btn" onclick="copy('hex')">복사</button>
                </div>
            </div>

            <div class="color-input-group">
                <label>RGB</label>
                <div class="color-input-row">
                    <input type="number" id="r-input" min="0" max="255" value="59" class="code-font" oninput="fromRgb()">
                    <input type="number" id="g-input" min="0" max="255" value="130" class="code-font" oninput="fromRgb()">
                    <input type="number" id="b-input" min="0" max="255" value="246" class="code-font" oninput="fromRgb()">
                    <input type="text" id="rgb-output" class="code-font" readonly value="rgb(59, 130, 246)" style="flex:1;">
                    <button class="copy-btn" onclick="copy('rgb')">복사</button>
                </div>
            </div>

            <div class="color-input-group">
                <label>HSL</label>
                <div class="color-input-row">
                    <input type="number" id="h-input" min="0" max="360" value="217" class="code-font" oninput="fromHsl()">
                    <span>°</span>
                    <input type="number" id="s-input" min="0" max="100" value="91" class="code-font" oninput="fromHsl()">
                    <span>%</span>
                    <input type="number" id="l-input" min="0" max="100" value="60" class="code-font" oninput="fromHsl()">
                    <span>%</span>
                    <input type="text" id="hsl-output" class="code-font" readonly value="hsl(217, 91%, 60%)" style="flex:1;">
                    <button class="copy-btn" onclick="copy('hsl')">복사</button>
                </div>
            </div>

            <div class="css-output">
                <input type="text" id="css-bg" class="code-font" readonly value="background-color: #3B82F6;">
                <input type="text" id="css-color" class="code-font" readonly value="color: #3B82F6;">
            </div>
        </div>

        <div class="panel">
            <div class="panel-title">색상 팔레트</div>
            <div id="palette" class="palette-grid"></div>
        </div>

        <div class="ad-space">광고</div>

        <div class="info-section">
            <h2>색상 형식 설명</h2>
            <div class="info-grid">
                <div>
                    <h3>HEX</h3>
                    <p>#RRGGBB 형식. 16진수로 빨강, 초록, 파랑을 표현. 웹에서 가장 많이 사용.</p>
                </div>
                <div>
                    <h3>RGB</h3>
                    <p>rgb(R, G, B) 형식. 0-255 범위의 10진수. 투명도는 rgba()로.</p>
                </div>
                <div>
                    <h3>HSL</h3>
                    <p>hsl(H, S%, L%) 형식. 색상(Hue), 채도(Saturation), 명도(Lightness).</p>
                </div>
            </div>
        </div>
    </main>

    <script>
        function hexToRgb(hex) {
            hex = hex.replace('#', '');
            if (hex.length === 3) hex = hex.split('').map(c => c + c).join('');
            const r = parseInt(hex.substr(0, 2), 16);
            const g = parseInt(hex.substr(2, 2), 16);
            const b = parseInt(hex.substr(4, 2), 16);
            return { r, g, b };
        }

        function rgbToHex(r, g, b) {
            return '#' + [r, g, b].map(x => x.toString(16).padStart(2, '0')).join('').toUpperCase();
        }

        function rgbToHsl(r, g, b) {
            r /= 255; g /= 255; b /= 255;
            const max = Math.max(r, g, b), min = Math.min(r, g, b);
            let h, s, l = (max + min) / 2;

            if (max === min) {
                h = s = 0;
            } else {
                const d = max - min;
                s = l > 0.5 ? d / (2 - max - min) : d / (max + min);
                switch (max) {
                    case r: h = ((g - b) / d + (g < b ? 6 : 0)) / 6; break;
                    case g: h = ((b - r) / d + 2) / 6; break;
                    case b: h = ((r - g) / d + 4) / 6; break;
                }
            }
            return { h: Math.round(h * 360), s: Math.round(s * 100), l: Math.round(l * 100) };
        }

        function hslToRgb(h, s, l) {
            h /= 360; s /= 100; l /= 100;
            let r, g, b;

            if (s === 0) {
                r = g = b = l;
            } else {
                const hue2rgb = (p, q, t) => {
                    if (t < 0) t += 1;
                    if (t > 1) t -= 1;
                    if (t < 1/6) return p + (q - p) * 6 * t;
                    if (t < 1/2) return q;
                    if (t < 2/3) return p + (q - p) * (2/3 - t) * 6;
                    return p;
                };
                const q = l < 0.5 ? l * (1 + s) : l + s - l * s;
                const p = 2 * l - q;
                r = hue2rgb(p, q, h + 1/3);
                g = hue2rgb(p, q, h);
                b = hue2rgb(p, q, h - 1/3);
            }
            return { r: Math.round(r * 255), g: Math.round(g * 255), b: Math.round(b * 255) };
        }

        function updateAll(r, g, b) {
            const hex = rgbToHex(r, g, b);
            const hsl = rgbToHsl(r, g, b);

            document.getElementById('hex-input').value = hex;
            document.getElementById('r-input').value = r;
            document.getElementById('g-input').value = g;
            document.getElementById('b-input').value = b;
            document.getElementById('h-input').value = hsl.h;
            document.getElementById('s-input').value = hsl.s;
            document.getElementById('l-input').value = hsl.l;

            document.getElementById('rgb-output').value = `rgb(${r}, ${g}, ${b})`;
            document.getElementById('hsl-output').value = `hsl(${hsl.h}, ${hsl.s}%, ${hsl.l}%)`;
            document.getElementById('css-bg').value = `background-color: ${hex};`;
            document.getElementById('css-color').value = `color: ${hex};`;

            document.getElementById('color-preview').style.background = hex;
            document.getElementById('color-picker').value = hex;

            generatePalette(hsl.h);
        }

        function fromPicker() {
            const hex = document.getElementById('color-picker').value;
            const rgb = hexToRgb(hex);
            updateAll(rgb.r, rgb.g, rgb.b);
        }

        function fromHex() {
            let hex = document.getElementById('hex-input').value.trim();
            if (!hex.startsWith('#')) hex = '#' + hex;
            if (!/^#([0-9A-Fa-f]{3}|[0-9A-Fa-f]{6})$/.test(hex)) return;
            const rgb = hexToRgb(hex);
            updateAll(rgb.r, rgb.g, rgb.b);
        }

        function fromRgb() {
            const r = parseInt(document.getElementById('r-input').value) || 0;
            const g = parseInt(document.getElementById('g-input').value) || 0;
            const b = parseInt(document.getElementById('b-input').value) || 0;
            updateAll(Math.min(255, Math.max(0, r)), Math.min(255, Math.max(0, g)), Math.min(255, Math.max(0, b)));
        }

        function fromHsl() {
            const h = parseInt(document.getElementById('h-input').value) || 0;
            const s = parseInt(document.getElementById('s-input').value) || 0;
            const l = parseInt(document.getElementById('l-input').value) || 0;
            const rgb = hslToRgb(h, s, l);
            updateAll(rgb.r, rgb.g, rgb.b);
        }

        function copy(type) {
            let value;
            switch (type) {
                case 'hex': value = document.getElementById('hex-input').value; break;
                case 'rgb': value = document.getElementById('rgb-output').value; break;
                case 'hsl': value = document.getElementById('hsl-output').value; break;
            }
            navigator.clipboard.writeText(value).then(() => {
                const s = document.getElementById('status');
                s.textContent = '복사되었습니다';
                s.classList.add('show');
                setTimeout(() => s.classList.remove('show'), 3000);
            });
        }

        function generatePalette(baseHue) {
            const palette = document.getElementById('palette');
            palette.innerHTML = '';
            for (let l = 95; l >= 5; l -= 10) {
                const rgb = hslToRgb(baseHue, 70, l);
                const hex = rgbToHex(rgb.r, rgb.g, rgb.b);
                const div = document.createElement('div');
                div.className = 'palette-item';
                div.style.background = hex;
                div.title = hex;
                div.onclick = () => { updateAll(rgb.r, rgb.g, rgb.b); };
                palette.appendChild(div);
            }
        }

        fromHex();
    </script>
    <script src="/assets/js/layout.js?v=2"></script>
</body>
</html>
